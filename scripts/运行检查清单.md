# 科研协作平台 - 运行检查清单

## 一、环境

- **MySQL 8**：端口 3306，执行 `sql/schema.sql` 创建库与表（含 admin/zhangsan 账号）
- **Redis**：端口 6379（认证服务需要）
- **Nacos**：可选；不启用时各服务会报连接失败，可忽略，网关使用静态路由

## 二、后端构建与端口

1. **根目录构建**（安装 research-platform 并构建 common、gateway）  
   ```powershell
   cd d:\projectapp\research-platform
   mvn install -DskipTests
   ```
2. **research-parent 构建**（构建 auth、project、task 等）  
   ```powershell
   cd d:\projectapp\research-platform\research-parent
   mvn install -DskipTests
   ```
3. **端口与路由**
   - 认证：**8091**（auth + user 接口）
   - 网关：**8090**（前端请求统一走此端口）
   - 项目：**8083**
   - 任务：**8084**

## 三、启动顺序

1. 认证：`cd research-auth` → `mvn spring-boot:run -DskipTests`
2. 网关：`cd research-gateway` → `mvn spring-boot:run -DskipTests`
3. 项目：`cd research-project` → `mvn spring-boot:run -DskipTests`
4. 任务：`cd research-task` → `mvn spring-boot:run -DskipTests`

或使用脚本：`.\scripts\start-backend.ps1`（需先完成上述 Maven 构建）。

## 四、前端

```powershell
cd research-frontend
npm install
npm run serve
```

浏览器打开：**http://localhost:8080** → 登录页，账号 **admin / admin123**。

前端请求走 **http://localhost:8090/api**（见 `research-frontend/src/api/request.js`），由网关转发到各服务。

## 五、验证

- 登录：`POST http://localhost:8090/api/auth/login`，Body: `{"username":"admin","password":"admin123"}`
- 网关健康：http://localhost:8090/actuator/health
- 前端登录后跳转首页，Token 存 localStorage，后续请求自动带 Authorization

## 六、已做修改摘要

- **网关**：端口 8090，路由 /api/auth、/api/user → 8091，/api/project → 8083，/api/task → 8084；JWT 跳过 /api/user/login 等
- **认证**：端口 8091（含 application-dev.yml）；Controller 同时支持 /auth 与 /user；Security 改为 spring-boot-starter-security；Swagger、Hutool、relativePath 已配
- **项目/任务**：relativePath、spring-boot-maven-plugin、任务端口 8084
- **前端**：request.js baseURL 8090；新增 router、Login、Home，App 使用 router-view，main 引入 ElementUI 与 router
- **START.md**：端口表、前端为 research-frontend + npm run serve、构建顺序说明
